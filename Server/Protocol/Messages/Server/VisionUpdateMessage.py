from DataStream.ByteStream import ByteStream
from Logic.Player import Player

class VisionUpdateMessage(ByteStream):
    def __init__(self, client, player):
        super().__init__(client)
        self.client = client
        self.id = 24109
        self.player = player

    def encode(self):
        commands = ["01-A4-01-B2-15-AA-83-01", "01-A4-01-8E-1F-89-83-01"]
        heartbeats = ["5E-2D-00-01-55-00-00-97-03-00-02-00-00-01-4D-80-84-1E-00-20-81-D3-40-00-00-00-00-00-00-00-00-00-00-20-00-AA-02-08-00-00-00-00-A0-98-03-73-60-04-8C-80-11-30-02-46-C0-08-18-01-23-60-04-CC-81-11-30-07-E6-00-06-C0-00-48-20-0B-E4-40-78-00-82-04-10-32-80-A0-01-04-0E-20-74-00-C1-03-08-1F-40-00-01-42-08-10-46-80-40-02-84-12-20-9C-00-21-05-10-00-80-08-00-84-00-40-00-00-12-00-3C-1F-A5-48-E0-15-19-0C-F6-FA-4D-51-24-F0-8A-0C-06-7B-22-49-21-A3-78-45-BC-07-92-D6-B1-89-57-C4-7B-A9-08-19-A3-78-45-BC-47-8B-52-B2-89-57-C4-7B-FC-08-FD-A2-78-05-4E-07-92-4E-B0-89-57-00-6E-C8-68-E3-9A-78-05-04-36-93-38-AC-89-57-80-52-6B-E8-55-A2-78-05-4C-C4-8A-FC-23-81-57-20-00-71-81-45-33-11-C5-2B-80-9B-39-E4-3E-09-BC-02-01-B0-87-01-02-AF-04-5E-81-00-EC-71-FE-10-5A-9E-C7-C2-04-00-80-02-7F-00-00-2C-61-09-00-00-00-00-00-10-00-00-00-00-C0-5D-00-00-00-DA-63-61-05-00-40-C1-81-0B-7F-00-00-02-61-29-00-00-64-00-D8-03-00-00-00-7E-13-00-00-C0-F4-F8-5F-02-00-50-89-B3-46-00-00-E0-3C-3F-02-00-80-25-00-DE-00-96-F0-0A-BC-02-00-AF-B0-4F-56-93-19-00-14-28-A0-05-88-4E-1E-65-06-00-05", "5E-2D-00-01-62-00-00-98-03-00-02-00-00-01-5A-80-84-1E-00-20-81-D3-40-00-00-00-00-00-00-00-00-00-00-20-00-AA-02-08-00-00-00-00-A8-98-03-23-60-04-8C-80-11-30-02-46-C0-08-18-01-23-60-0E-8C-80-39-30-07-46-C0-08-C0-00-18-00-09-64-81-1C-08-12-40-C8-00-82-06-10-38-80-D0-01-04-0F-20-7C-00-01-04-08-21-40-18-01-02-09-10-4A-80-70-02-84-14-20-AC-00-81-05-10-00-80-08-00-84-00-40-00-00-12-00-F4-9B-A2-48-E0-15-19-0C-F6-44-92-42-46-F1-8A-78-0F-24-AD-63-13-AF-88-F7-52-11-32-46-F1-8A-78-8F-16-A5-64-13-AF-88-F7-EC-51-23-46-F1-8A-78-CF-22-2D-63-13-AF-C0-E9-7A-D1-EF-35-F1-0A-E4-2C-25-FD-5A-13-AF-C0-B2-CE-D0-D4-44-F1-0A-74-C9-15-65-45-02-AF-40-00-34-D3-8A-AE-23-8A-57-E0-3D-7E-48-69-12-78-05-02-F0-11-0D-D4-53-09-BC-02-01-20-C5-16-02-A6-02-5E-01-37-9A-A0-AD-EA-1A-51-44-13-AF-80-1B-D3-51-1C-E4-79-2C-4C-00-00-28-F0-07-00-C0-12-96-00-00-00-00-00-00-01-00-00-00-00-DC-05-00-00-E8-3C-00-56-00-00-34-24-B8-11-00-00-20-10-96-02-00-40-06-80-3D-00-4B-14-E5-BA-00-40-51-08-CF-FF-25-00-00-95-38-6B-14-00-00-CE-F3-23-00-00-58-02-E0-0D-D0-07-96-C0-2B-00-60-09-FB-64-35-99-01-40-81-02-5A-80-E8-E4-51-66-00-50", "5E-2D-00-01-4F-00-00-99-03-00-02-00-00-01-47-80-84-1E-00-20-81-D3-40-00-00-00-00-00-00-00-00-00-00-20-00-AA-02-08-00-00-00-00-A0-98-03-23-60-04-8C-80-11-30-02-46-C0-08-18-01-23-60-04-CC-81-39-30-02-46-00-06-C0-00-48-20-0B-E4-40-90-00-42-06-10-34-80-C0-01-84-0E-20-78-00-E1-03-08-20-40-08-01-C2-08-10-4A-80-70-02-84-14-20-AC-00-81-05-10-00-80-08-00-84-00-40-00-00-12-00-F4-9B-A2-48-E0-15-19-0C-F6-44-92-42-46-F1-8A-78-0F-24-AD-63-13-AF-88-F7-52-11-32-46-F1-8A-78-8F-16-A5-64-13-AF-88-F7-EC-51-23-46-F1-8A-78-AF-21-BD-65-13-AF-88-F7-68-91-18-36-F1-0A-C0-ED-23-8D-5D-13-AF-80-C0-C6-D0-FD-44-F1-0A-50-4A-15-ED-49-14-AF-80-89-12-91-A9-24-F0-0A-04-00-29-2C-28-93-12-78-05-02-D0-8C-47-44-42-05-BC-02-A5-30-46-B7-D1-C4-2B-50-0A-CF-63-61-02-00-40-81-3F-00-00-96-B0-04-00-00-00-00-00-08-00-00-00-00-E0-2E-00-00-00-E1-69-AF-02-00-A0-21-B3-8D-01-00-00-81-B0-14-00-00-32-00-EC-01-26-82-25-D7-05-00-58-12-76-00-30-01-00-A8-C4-59-63-00-00-70-9E-1F-01-00-C0-12-00-6F-00-32-E8-03-5E-01-80-3E-D8-27-AB-C9-0C-00-0A-14-D0-02-50-67-98-32-93-82-02", "5E-2D-00-01-88-00-00-9A-03-00-02-00-00-01-80-80-84-1E-00-20-81-D3-40-00-00-00-00-00-00-00-00-00-00-20-00-AA-02-08-00-00-00-00-C0-98-03-23-60-04-8C-80-11-30-02-46-C0-08-18-01-23-60-04-8C-80-39-30-07-46-C0-08-18-01-73-60-04-60-00-0C-80-04-B2-40-0E-04-09-20-64-00-41-03-08-1C-40-E8-00-82-07-10-3E-80-00-02-84-10-20-8C-00-A1-04-08-26-40-38-01-42-0A-10-56-80-C0-02-04-17-20-BC-00-01-06-10-00-80-08-00-84-00-40-00-00-12-00-F4-9B-A2-48-E0-15-19-0C-F6-44-92-42-46-F1-8A-78-0F-24-AD-63-13-AF-88-F7-52-11-32-46-F1-8A-78-8F-16-A5-64-13-AF-88-F7-EC-51-23-46-F1-8A-78-AF-21-BD-65-13-AF-88-F7-54-91-41-36-F1-0A-9C-CE-22-1D-60-13-AF-40-CE-BE-90-26-45-F1-0A-2C-AB-14-79-4C-14-AF-40-97-52-50-67-44-F1-0A-BC-67-12-05-48-02-AF-40-00-E2-F2-83-EC-27-81-57-20-00-F6-20-46-89-53-C0-2B-C0-8D-5A-A4-25-4D-BC-02-DC-68-3E-77-54-C0-2B-E0-46-CC-23-51-11-1E-F1-4A-E0-15-08-C0-1E-F3-8E-A1-55-92-B8-A2-89-57-C0-8D-36-29-17-F2-3C-16-26-00-00-14-F8-03-00-60-09-4B-00-00-00-00-00-80-00-00-00-00-00-EE-02-00-00-A8-9D-EC-2A-00-00-1A-32-DB-08-00-00-10-08-4B-01-00-20-03-C0-1E-40-1F-26-72-5D-00-60-22-3E-47-00-13-00-80-4A-94-35-02-00-00-E7-F9-11-00-00-2C-01-F0-06-58-02-32-E0-15-00-20-83-7D-B2-9A-CC-00-A0-40-01-2D-30-75-0A-2A-33-3E-24", "5E-2D-00-01-66-00-00-9B-03-00-02-00-00-01-5E-80-84-1E-00-20-81-D3-40-00-00-00-00-00-00-00-00-00-00-20-00-AA-02-08-00-00-00-00-B0-18-01-23-60-04-8C-80-11-30-02-46-C0-08-18-01-23-60-0E-CC-81-11-30-02-46-C0-1C-18-01-18-00-03-20-81-2C-90-03-41-03-08-1C-40-E8-00-82-07-10-3E-80-00-02-84-10-20-8C-00-A1-04-08-26-40-38-01-42-0A-10-56-80-C0-02-04-17-20-BC-00-01-06-10-00-80-08-00-84-00-40-00-00-12-00-80-A4-75-6C-E2-15-F1-5E-2A-42-C6-28-5E-11-EF-D1-A2-94-6C-E2-15-F1-9E-3D-6A-C4-28-5E-11-EF-35-A4-B7-6C-E2-15-F1-5E-28-52-CD-26-5E-11-EF-2D-24-55-6C-E2-15-80-1B-17-F2-A9-28-5E-01-81-89-A2-E1-89-E2-15-A0-54-09-0A-92-28-5E-01-13-79-A2-AE-48-E0-15-08-80-66-A4-D0-D4-24-F0-0A-04-E0-23-F8-C8-5D-0A-78-05-26-32-8A-FA-A5-89-57-60-22-01-88-7B-0A-78-05-4A-E1-78-7A-2A-81-57-20-00-A4-A0-48-FF-D1-C4-2B-50-0A-CF-63-61-02-00-40-81-3F-00-00-96-B0-04-00-00-00-00-00-08-00-00-00-00-E0-2E-00-00-40-D3-69-AE-02-00-A0-21-95-8D-01-00-00-81-B0-14-00-00-32-00-EC-01-C2-41-1F-D7-05-00-F4-C1-71-06-30-01-00-A8-44-59-A3-00-00-70-9E-1F-01-00-C0-12-00-6F-00-19-58-02-5E-01-80-25-D8-27-AB-C9-0C-00-0A-14-D0-02-49-A7-A8-32-F3-83-01"]
        self.writeVInt(self.player.battleTick) # tick
        self.writeVInt(int(self.player.battleTick / 10)) # tick / 10
        self.writeVInt(1) #commands count
        self.writeVInt(self.player.battleTick) #viewers
        
        #self.writeInt(0)
        
        #print(self.player.battleTick)
        
        battle = ByteStream(self.client)
        
        battle.writeVInt(self.player.battleTick)
        
        
        self.writeInt(battle.size())
        self.writeBytes(battle.getRaw())
        
        
        #print("VisionUpdate sent.")